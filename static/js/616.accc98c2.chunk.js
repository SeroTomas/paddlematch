"use strict";(self.webpackChunkPaddleMatch=self.webpackChunkPaddleMatch||[]).push([[616],{65698:(e,a,l)=>{l.r(a),l.d(a,{CalendarPage:()=>x});var r=l(65043),s=l(68937);const t={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"}}]},name:"left",theme:"outlined"};var o=l(22172),n=function(e,a){return r.createElement(o.A,Object.assign({},e,{ref:a,icon:t}))};n.displayName="LeftOutlined";const i=r.forwardRef(n);const c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"}}]},name:"right",theme:"outlined"};var d=function(e,a){return r.createElement(o.A,Object.assign({},e,{ref:a,icon:c}))};d.displayName="RightOutlined";const u=r.forwardRef(d);var _=l(89421),v=l(44423),h=l(60446),m=l.n(h);const p={wrapper:"WeekPicker_wrapper__8wFQq",middlePicker:"WeekPicker_middlePicker__8yamm",outerThisWeekButton:"WeekPicker_outerThisWeekButton__woyKX",picker:"WeekPicker_picker__51krA",leftButton:"WeekPicker_leftButton__oj-oY",rightButton:"WeekPicker_rightButton__L2eTM"};var b=l(70579);function k(e){let{date:a,onChange:l}=e;const[s,t]=(0,r.useState)(!1),o=(0,r.useCallback)((()=>{t(!0)}),[]),n=(0,r.useCallback)((e=>{l(a.subtract(7,"days")),t(!1)}),[a,l]),c=(0,r.useCallback)((e=>{l(a.add(7,"days")),t(!1)}),[a,l]),d=(0,r.useCallback)((e=>{l(m()()),t(!1)}),[l]),h=(0,r.useCallback)((e=>{l(e),t(!1)}),[l]),k=(0,r.useCallback)((e=>{t(e)}),[]);return(0,b.jsxs)("div",{className:p.wrapper,children:[(0,b.jsxs)("div",{className:p.middlePicker,children:[(0,b.jsx)(v.l,{className:p.picker,picker:"week",open:s,inputReadOnly:!0,allowClear:!1,bordered:!0,value:a,onOpenChange:k,format:"[Semana] w (YYYY)",onClick:o,onChange:h,renderExtraFooter:()=>(0,b.jsx)(_.A,{onClick:d,type:"link",children:"Esta semana"})}),(0,b.jsx)(_.A,{className:p.outerThisWeekButton,onClick:d,type:"link",children:"Fijar el d\xeda de hoy"})]}),(0,b.jsxs)(_.A,{className:p.leftButton,onClick:n,children:[(0,b.jsx)(i,{}),"Semana pasada"]}),(0,b.jsxs)(_.A,{className:p.rightButton,onClick:c,children:["Pr\xf3xima semana",(0,b.jsx)(u,{})]})]})}const f={wrapper:"CalendarPage_wrapper__n5W5N",alert:"CalendarPage_alert__Xsfib"};var C=l(60665);function x(){const e=(0,C.z)("day"),[a,l]=(0,r.useState)(null),t=(0,r.useCallback)((e=>{l(e)}),[]);return(0,b.jsxs)("div",{className:f.wrapper,children:[(0,b.jsx)(k,{date:a||e,onChange:t}),(0,b.jsx)(s.P,{selectedDate:a||e})]})}},68937:(e,a,l)=>{l.d(a,{P:()=>T});var r=l(65043),s=l(39194),t=l(89421),o=l(40989),n=l(49613),i=l(18465),c=l.n(i);var d=l(70579);const u=c().bind({cell:"SlotCell_cell__RH5Na",enabled:"SlotCell_enabled__3blfW",alwaysClickable:"SlotCell_alwaysClickable__6scLz",slot:"SlotCell_slot__0BPtp",text:"SlotCell_text__8IhyK",singleLine:"SlotCell_singleLine__bt8++",reserved:"SlotCell_reserved__TLc5k",mine:"SlotCell_mine__8piE6",loading:"SlotCell_loading__bxMX0",load:"SlotCell_load__av9ng"}),_=32,v=3;function h(e){let{alwaysClickable:a=!1,baseRowSpan:l,courtId:s,courtName:t,from:i,to:c,rowIndex:h,rows:m,disabled:p=!1,loading:b=!1,onClick:k,reservation:f}=e;const{user:C}=(0,r.useContext)(n.I),x=(0,r.useCallback)((()=>{(a||!p&&(null===f||void 0===f?void 0:f.type)!==o.P.DISABLE)&&k({courtId:s,from:i,to:c,reservation:f})}),[a,s,i,c,p,k,f]);let y=l;if(f)if(f.from.isBefore(i,"hour")&&0!==h)y=0;else{const e=(m[m.length-1].to.hour()||24)-i.hour();if(i.isSame(f.to,"day")){const e=f.to.diff(i,"hour");y=0;for(let a=h;a<h+e;++a)y+=m[a].span}else y=e}return 0===y?null:(0,d.jsx)("div",{className:u({alwaysClickable:a,cell:!0,enabled:!p&&(null===f||void 0===f?void 0:f.type)!==o.P.DISABLE}),style:{padding:v},onClick:x,children:(0,d.jsx)("div",{className:u({slot:!0,loading:b,reserved:(null===f||void 0===f?void 0:f.type)===o.P.NORMAL,mine:C&&(null===C||void 0===C?void 0:C.userId)===(null===f||void 0===f?void 0:f.userId)}),style:{height:_*y+2*v*(y-1)},"data-free-text":"Disponible","data-free-text-hover":"".concat(i.hour()," hs, ").concat(t),children:(0,d.jsx)("div",{className:u({text:!0,singleLine:1===y}),children:f&&(f.type===o.P.DISABLE?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{children:"No disponible"}),(0,d.jsx)("div",{children:f.text})]}):(0,d.jsx)("div",{children:f.text||f.name}))})})})}var m=l(17592);const p={wrapper:"DayTable_wrapper__SYCqL",col:"DayTable_col__I58Rs",cols:"DayTable_cols__2IJGN",date:"DayTable_date__8U6Hn",today:"DayTable_today__BDOt3",court:"DayTable_court__SqGRb",body:"DayTable_body__ZERaC",blur:"DayTable_blur__cro9T",infoOverlay:"DayTable_infoOverlay__mS5rR",linkButton:"DayTable_linkButton__ok+U+",adminAction:"DayTable_adminAction__wTYky"};var b=l(60665);const k=c().bind(p);function f(e){let{courts:a,date:l,loading:o,onDisableCourtClick:i,onSlotClick:c,reservationDaysInAdvance:u,reservations:_}=e;const{config:{visibleHours:v}}=(0,r.useContext)(m.v),{user:f}=(0,r.useContext)(n.I),[C,x]=(0,r.useState)(!1);(0,r.useEffect)((()=>x(!1)),[f]);const y=(0,b.z)("hour"),j=(0,r.useMemo)((()=>y.isSame(l,"day")),[l,y]),g=(0,r.useMemo)((()=>l.isAfter(y.add(u,"day"),"day")),[l,y,u]),w=(0,r.useMemo)((()=>l.subtract(u,"day").format("L")),[l,u]),S=!C&&g,N=(0,r.useMemo)((()=>(0,s.fr)(l,v)),[l,v]),A=(0,r.useCallback)((()=>x(!0)),[]);return(0,d.jsxs)("div",{className:p.wrapper,children:[(0,d.jsxs)("div",{className:p.date,children:[j&&(0,d.jsx)("span",{className:p.today,children:"Hoy"}),l.format("dd[\xa0]L")]}),(0,d.jsx)("div",{className:p.cols,children:a.map((e=>{let{courtId:a,name:l}=e;return(0,d.jsx)("div",{className:p.court,children:l},a)}))}),(0,d.jsxs)("div",{className:k("body","cols"),children:[a.map((e=>{let{courtId:a,name:r}=e;return(0,d.jsxs)("div",{className:k({col:!0,blur:S}),children:[N.map(((e,l)=>{let{from:t,to:n,span:i}=e;return(0,d.jsx)(h,{alwaysClickable:null===f||void 0===f?void 0:f.admin,courtId:a,courtName:r,rowIndex:l,rows:N,from:t,to:n,baseRowSpan:i,disabled:t.isBefore(y,"hour"),loading:o,onClick:c,reservation:(0,s.kp)(_,t,n,a)},t)})),(null===f||void 0===f?void 0:f.admin)&&(0,d.jsx)("div",{className:p.adminAction,children:(0,d.jsx)(t.A,{type:"link",onClick:()=>(e=>{i({courtId:e,from:l.hour(0),to:l.hour(24)})})(a),children:"Bloquear"})})]},a)})),S&&(0,d.jsxs)("div",{className:p.infoOverlay,children:[(0,d.jsxs)("div",{children:["Se puede reservar",(0,d.jsx)("br",{}),"desde ",w]}),(null===f||void 0===f?void 0:f.admin)&&(0,d.jsxs)(t.A,{className:p.linkButton,type:"link",onClick:A,children:["Haz una reserva de todos modos",(0,d.jsx)("br",{}),"(Trainer/Admin)"]})]})]})]})}var C=l(52603);const x={wrapper:"HoursTable_wrapper__WMnEQ",hour:"HoursTable_hour__foUXz",to:"HoursTable_to__Ky0Mp",highlight:"HoursTable_highlight__jlcYS"},y=c().bind(x);function j(e){let{highlightHour:a}=e;const{config:{visibleHours:l}}=(0,r.useContext)(m.v),t=(0,b.z)("hour"),o=(0,r.useMemo)((()=>(0,s.XD)(l)),[l]);return(0,d.jsx)("div",{className:x.wrapper,children:o.map((e=>(0,d.jsxs)("div",{className:y({hour:!0,highlight:a&&t.hour()===e}),children:[e,"hs",(0,d.jsx)("br",{}),(0,d.jsxs)("span",{className:x.to,children:["hasta ",(e+1)%24,"hs"]})]},e)))})}var g=l(80759),w=l(42785),S=l(22768);const N={wrapper:"ReservationCalendar_wrapper__jw7vb",tableWrapper:"ReservationCalendar_tableWrapper__KCZs0",tableScroller:"ReservationCalendar_tableScroller__C8+cO"};var A=l(24095),I=l(22935);const D=7;function T(e){let{kiosk:a=!1,selectedDate:l}=e;const{courts:s,config:{reservationDaysInAdvance:t}}=(0,r.useContext)(m.v),n=(0,b.z)("day"),[i,c]=(0,r.useState)(),u=(0,r.useRef)(),[_,v]=(0,r.useState)(null),[h,p]=(0,A.g)(S.Mf,v),k=(0,r.useCallback)((()=>p({query:{start:l.startOf("week").toISOString(),end:l.endOf("week").toISOString()}})),[l,p]);(0,I.w)(k,w.r.RESERVATIONS),(0,r.useEffect)((()=>{v(null),k()}),[k]);const x=(0,r.useMemo)((()=>Array.from(Array(D)).map(((e,a)=>l.startOf("week").add(a,"day")))),[l]);(0,r.useEffect)((()=>{if(u.current)if(l.isSame(n,"week")){const e=Math.abs(n.startOf("week").diff(n,"day"));requestAnimationFrame((()=>{u.current.scrollLeft=u.current.scrollWidth/D*e}))}else requestAnimationFrame((()=>{u.current.scrollLeft=0}))}),[l,n]);const y=(0,r.useCallback)((e=>{a||c(e)}),[a]),T=(0,r.useCallback)((e=>{c({...e,type:o.P.DISABLE})}),[]),B=(0,r.useCallback)((()=>{c(null)}),[]);return h.error?(0,d.jsx)("div",{className:N.tableWrapper,children:(0,d.jsx)(C.Y,{})}):(0,d.jsxs)("div",{className:N.wrapper,children:[(0,d.jsxs)("div",{className:N.tableWrapper,children:[(0,d.jsx)(j,{highlightHour:l.isSame(n,"week")}),(0,d.jsx)("div",{className:N.tableScroller,ref:u,children:x.map((e=>(0,d.jsx)(f,{courts:s,date:e,loading:!_,onDisableCourtClick:T,onSlotClick:y,reservationDaysInAdvance:t,reservations:_},e)))})]}),i&&(0,d.jsx)(g.A,{initialCourtId:null===i||void 0===i?void 0:i.courtId,initialFrom:null===i||void 0===i?void 0:i.from,initialTo:null===i||void 0===i?void 0:i.to,reservation:null===i||void 0===i?void 0:i.reservation,type:null===i||void 0===i?void 0:i.type,onFinish:B,setReservations:v})]})}}}]);
//# sourceMappingURL=616.accc98c2.chunk.js.map