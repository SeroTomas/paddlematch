"use strict";(self.webpackChunkPaddleMatch=self.webpackChunkPaddleMatch||[]).push([[160],{19160:(e,a,r)=>{r.r(a),r.d(a,{UserManagementPage:()=>I});var i=r(75932),t=r(89421),n=r(26032),d=r(64435),s=r(79833),o=r(67407),l=r(39470),c=r(75388),m=r(61966),u=r(65043),x=r(22768),v=r(52603),h=r(49613);const j={wrapper:"UserManagementPage_wrapper__W6PE6",spacer:"UserManagementPage_spacer__1dVDb"};var k=r(24095),p=r(70579);function I(){const{user:{userId:e}}=(0,u.useContext)(h.I),[a,r]=(0,u.useState)([]),[I]=(0,k.g)(x.x1,r,!0),[g,C]=(0,k.g)(x.Ff,r),[y,A]=(0,k.g)(x.Kl,r),b=(0,u.useMemo)((()=>a.map((e=>({...e,key:e.userId})))),[a]),f=(0,u.useCallback)((e=>{C({path:{userId:e}},{userId:e})}),[C]),w=(0,u.useCallback)(((e,a)=>{A({path:{userId:e}},{userId:e,admin:a})}),[A]),R=[{title:"UserId",dataIndex:"userId",key:"userId",width:"5%",sorter:(e,a)=>e.userId<a.userId?-1:1},{title:"Admin",dataIndex:"admin",key:"admin",width:"10%",sorter:(e,a)=>e.admin===a.admin?0:e.admin?-1:1,render:(a,r)=>(0,p.jsxs)("div",{children:[r.admin?"Si":"No",(0,p.jsx)(i.A,{title:"Cambiar estado de administrador",children:(0,p.jsx)(t.A,{disabled:r.userId===e,type:"link",icon:(0,p.jsx)(o.A,{}),onClick:()=>{n.A.confirm({title:r.admin?"\xbfRevocar derechos de administrador?":"\xbfConceder derechos de administrador?",icon:(0,p.jsx)(l.A,{}),content:(0,p.jsxs)("div",{children:["El usuario",(0,p.jsx)("br",{}),(0,p.jsxs)("strong",{children:[r.name," (",r.mail,")"]}),(0,p.jsx)("br",{}),"ser\xe1 a trav\xe9s de esta acci\xf3n ",r.admin?"degradado a un usuario normal.":"ascendido a administrador."]}),okText:r.admin?"retirar derechos":"Hazte administrador",okType:"danger",cancelText:"Cancelar",onOk(){w(r.userId,!r.admin)}})}})})]})},{title:"Name",dataIndex:"name",key:"name",width:"20%",sorter:(e,a)=>e.name.localeCompare(a.name)},{title:"E-Mail",dataIndex:"mail",key:"mail",width:"25%",sorter:(e,a)=>e.mail.localeCompare(a.mail)},{title:"Verificado",dataIndex:"verified",key:"verified",width:"5%",sorter:(e,a)=>e.verified===a.verified?0:e.verified?-1:1,render:(e,a)=>a.verified?"Si":"No"},{title:"\xdaltima actividad",dataIndex:"lastActivity",key:"lastActivity",width:"20%",sorter:(e,a)=>e.lastActivity-a.lastActivity,render:(e,a)=>{var r;return null===(r=a.lastActivity)||void 0===r?void 0:r.format("L LT")}},{title:"Reservas (abiertas)",dataIndex:"upcomingReservationCount",key:"upcomingReservationCount",width:"5%",sorter:(e,a)=>e.upcomingReservationCount-a.upcomingReservationCount},{title:"Reservas (totales)",dataIndex:"totalReservationCount",key:"totalReservationCount",width:"5%",sorter:(e,a)=>e.totalReservationCount-a.totalReservationCount},{title:"",key:"action",render:(a,r)=>(0,p.jsxs)(d.A,{children:[(0,p.jsx)(i.A,{title:"Enviar correo electr\xf3nico",children:(0,p.jsx)(t.A,{type:"link",icon:(0,p.jsx)(c.A,{}),disabled:r.userId===e,onClick:()=>{window.location.href="mailto:".concat(r.mail)}})}),(0,p.jsx)(i.A,{title:"Eliminar usuario",children:(0,p.jsx)(t.A,{type:"link",danger:!0,icon:(0,p.jsx)(m.A,{}),disabled:r.userId===e,onClick:()=>{n.A.confirm({title:"\xbfBorrar usuario?",icon:(0,p.jsx)(l.A,{}),content:(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{children:"Esta acci\xf3n no se puede deshacer."}),(0,p.jsx)("div",{children:"Todos los datos y reservas ser\xe1n eliminados irrevocablemente."}),(0,p.jsx)("br",{}),(0,p.jsx)("div",{children:(0,p.jsxs)("strong",{children:["Usuario: ",r.name,(0,p.jsx)("br",{}),"E-Mail: ",r.mail]})})]}),okText:"Borrar permanentemente",okType:"danger",cancelText:"Cancelar",onOk(){f(r.userId)}})}})})]},r._id)}];return I.error||g.error||y.error?(0,p.jsx)(v.Y,{}):(0,p.jsxs)("div",{className:j.wrapper,children:[(0,p.jsx)("h1",{children:"Gesti\xf3n de usuarios"}),(0,p.jsx)(s.A,{columns:R,dataSource:b,loading:I.loading||g.loading||y.loading,scroll:{x:1300}})]})}}}]);
//# sourceMappingURL=160.d500a864.chunk.js.map